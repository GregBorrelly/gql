<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>GraphQL Inspector</title>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/@mdi/font@7.2.96/css/materialdesignicons.min.css" rel="stylesheet">
  <style>
    :root {
      --primary: #E535AB;
      --primary-light: #f198d4;
      --bg-dark: #2A2139;
      --bg-light: #ffffff;
      --text-primary: #172b4d;
      --border-color: #e1e4e8;
    }

    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      background: var(--bg-light);
      color: var(--text-primary);
    }

    .app-container {
      display: grid;
      grid-template-rows: auto 1fr;
      height: 100vh;
    }

    .header {
      background: var(--bg-dark);
      color: white;
      padding: 8px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .header-title {
      display: flex;
      align-items: center;
      gap: 16px;
      font-weight: 500;
    }

    .header-title svg {
      width: 42px;
      height: 42px;
      flex-shrink: 0;
    }

    .header-title span {
      font-size: 18px;
      color: white;
      font-weight: 600;
    }

    .toolbar {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .search-box {
      background: rgba(255, 255, 255, 0.1);
      border: none;
      border-radius: 4px;
      padding: 6px 12px;
      color: white;
      font-size: 14px;
      width: 250px;
    }

    .search-box::placeholder {
      color: rgba(255, 255, 255, 0.6);
    }

    .toolbar-btn {
      background: none;
      border: none;
      color: rgba(255, 255, 255, 0.8);
      cursor: pointer;
      padding: 8px;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .toolbar-btn:hover {
      background: rgba(255, 255, 255, 0.1);
      color: white;
    }

    .toolbar-btn i {
      font-size: 20px;
    }

    .requests-list {
      overflow-y: auto;
      padding: 16px;
    }

    .request-card {
      background: white;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      margin-bottom: 8px;
      padding: 10px 16px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: space-between;
      transition: background-color 0.2s;
    }

    .request-card:hover {
      background: #f8f9fa;
    }

    .request-card.selected {
      border-color: var(--primary);
      box-shadow: 0 0 0 1px var(--primary);
    }

    .request-header {
      padding: 12px 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid var(--border-color);
      cursor: pointer;
    }

    .request-header:hover {
      background: #f8f9fa;
    }

    .request-info {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .operation-name {
      font-weight: 500;
      font-size: 14px;
    }

    .timestamp {
      color: #666;
      font-size: 13px;
    }

    .operation-type {
      display: none;
    }

    .operation-type.mutation {
      background: #fff1f1;
      color: #d73a49;
    }

    .request-content {
      display: none;
    }

    .request-content.visible {
      display: block;
    }

    .tabs {
      display: flex;
      background: #f6f8fa;
      padding: 0 16px;
      border-bottom: 1px solid var(--border-color);
    }

    .tab {
      padding: 12px 16px;
      cursor: pointer;
      color: #666;
      font-size: 14px;
      border-bottom: 2px solid transparent;
    }

    .tab.active {
      color: var(--primary);
      border-bottom-color: var(--primary);
    }

    .tab-content {
      padding: 16px;
    }

    .query-section {
      font-family: 'JetBrains Mono', monospace;
      background: #282a36;
      color: #f8f8f2;
      padding: 16px;
      border-radius: 6px;
      position: relative;
      line-height: 1.5;
      overflow: auto;
    }

    .query-section pre {
      margin: 0;
      white-space: pre-wrap;
      font-size: 13px;
      font-family: 'JetBrains Mono', monospace;
      line-height: 1.5;
      border-radius: 4px;
    }

    .query-keyword {
      color: #ff79c6;
    }

    .query-operation-name {
      color: #50fa7b;
    }

    .query-field {
      color: #8be9fd;
    }

    .query-argument-name {
      color: #ffb86c;
    }

    .query-argument-value {
      color: #f1fa8c;
    }

    .query-variable {
      color: #bd93f9;
    }

    .query-brace {
      color: #ff79c6;
    }

    .variables-title {
      color: #666;
      font-size: 14px;
      margin-bottom: 8px;
      font-family: 'Inter', sans-serif;
    }

    .variables-section {
      margin-top: 24px;
    }

    .copy-btn {
      position: absolute;
      top: 8px;
      right: 8px;
      background: rgba(255, 255, 255, 0.1);
      border: none;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .copy-btn:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .json-viewer {
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      line-height: 1.5;
    }

    .json-item {
      padding-left: 20px;
      position: relative;
    }

    .json-toggle {
      cursor: pointer;
      user-select: none;
    }

    .json-toggle::before {
      content: '▶';
      color: var(--primary);
      margin-right: 4px;
      display: inline-block;
      transition: transform 0.2s;
    }

    .json-toggle.open::before {
      transform: rotate(90deg);
    }

    .json-key {
      color: #ff79c6;
    }

    .json-string {
      color: #50fa7b;
    }

    .json-number {
      color: #bd93f9;
    }

    .json-boolean {
      color: #8be9fd;
    }

    .json-null {
      color: #ff5555;
    }

    .hidden-json {
      display: none;
    }

    /* Scrollbar styling */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: #d1d5db;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #9ca3af;
    }

    .split-view {
      display: grid;
      grid-template-columns: 350px 1fr;
      height: calc(100vh - 56px); /* Subtract header height */
      overflow: hidden;
    }

    .requests-list {
      border-right: 1px solid var(--border-color);
      overflow-y: auto;
      padding: 16px;
      background: #f8f9fa;
    }

    .details-panel {
      overflow-y: auto;
      background: white;
    }

    .empty-state {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
      color: #666;
      gap: 16px;
    }

    .request-card {
      background: white;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      margin-bottom: 8px;
      overflow: hidden;
    }

    .request-card.selected {
      border-color: var(--primary);
      box-shadow: 0 0 0 1px var(--primary);
    }

    .request-header {
      padding: 12px 16px;
      cursor: pointer;
    }

    /* Remove the border-bottom from request-header since it's now a sidebar item */
    .request-header {
      border-bottom: none;
    }

    .details-content {
      padding: 24px;
    }

    .details-header {
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 1px solid var(--border-color);
    }

    .details-title {
      font-size: 18px;
      font-weight: 600;
      color: var(--primary);
      margin-bottom: 8px;
    }

    /* Update the tab styles for the details panel */
    .tabs {
      background: none;
      padding: 0;
      margin-bottom: 16px;
    }

    .tab {
      padding: 8px 16px;
      font-weight: 500;
      position: relative;
    }

    .tab.active::after {
      content: '';
      position: absolute;
      bottom: -1px;
      left: 0;
      right: 0;
      height: 2px;
      background: var(--primary);
    }

    /* Add these new styles for filters and metrics */
    .filters {
      display: flex;
      gap: 8px;
      padding: 8px 16px;
      background: var(--bg-light);
      border-bottom: 1px solid var(--border-color);
    }

    .filter-group {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .filter-select {
      background: white;
      border: 1px solid var(--border-color);
      border-radius: 4px;
      padding: 4px 8px;
      font-size: 13px;
    }

    .metrics {
      display: flex;
      gap: 16px;
      margin-top: 16px;
      padding: 12px;
      background: var(--bg-light);
      border-radius: 6px;
    }

    .metric {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .metric-label {
      font-size: 12px;
      color: #666;
    }

    .metric-value {
      font-size: 14px;
      font-weight: 500;
    }

    .status-badge {
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 500;
      margin-left: 8px;
    }

    .status-badge::before {
      content: '';
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: currentColor;
    }

    .status-badge.success {
      background: var(--success);
      color: white;
    }

    .status-badge.error {
      background: var(--error);
      color: white;
    }

    .status-badge.pending {
      background: var(--warning);
      color: black;
    }

    .actions-menu {
      position: absolute;
      top: 12px;
      right: 12px;
      display: flex;
      gap: 8px;
    }

    .action-btn {
      background: none;
      border: none;
      color: #666;
      cursor: pointer;
      padding: 4px;
      border-radius: 4px;
      font-size: 18px;
    }

    .action-btn:hover {
      background: rgba(0, 0, 0, 0.05);
      color: var(--primary);
    }

    .theme-toggle {
      position: fixed;
      bottom: 16px;
      right: 16px;
      background: var(--primary);
      color: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 20px;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .request-card[data-status="pending"] {
      opacity: 0.7;
    }

    .request-card[data-status="success"] {
      border-left: 3px solid var(--success);
    }

    .request-card[data-status="error"] {
      border-left: 3px solid var(--error);
    }

    /* Update button styles to better handle emojis */
    .copy-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 8px;
    }

    .copy-btn span {
      font-size: 14px;
    }

    .action-btn span {
      font-size: 16px;
    }

    .clear-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .clear-btn span {
      font-size: 14px;
    }

    /* Query type indicators */
    .request-card[data-type="query"] .operation-name {
      color: #2563eb; /* Deeper blue for better contrast */
    }

    .request-card[data-type="mutation"] .operation-name {
      color: #f97316; /* Orange for mutations */
    }

    .operation-name {
      font-weight: 500;
      font-size: 14px;
    }

    /* Update status badge positioning */
    .status-badge {
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 500;
      margin-left: 8px;
    }

    /* Remove the old operation type badge */
    .operation-type {
      display: none;
    }

    /* Add these styles for the error tab */
    .error-tab {
      color: var(--error) !important;
      font-weight: 500;
    }

    .error-tab.active {
      border-bottom-color: var(--error) !important;
    }

    .error-section {
      border: 1px solid var(--error);
    }

    /* Update tab styles */
    .tabs {
      display: flex;
      gap: 16px;
      margin-bottom: 16px;
    }

    .tab {
      padding: 8px 0;
      cursor: pointer;
      color: #666;
      font-size: 14px;
      border-bottom: 2px solid transparent;
      transition: all 0.2s;
    }

    .tab:hover {
      color: var(--primary);
    }

    .tab.active {
      color: var(--primary);
      border-bottom-color: var(--primary);
    }

    .request-group {
      margin-bottom: 24px;
    }

    .group-header {
      font-size: 13px;
      font-weight: 500;
      color: #666;
      text-transform: capitalize;
      padding: 0 8px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
      justify-content: space-between;
    }

    .group-header-left {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .group-count {
      background: #e5e7eb;
      color: #666;
      padding: 1px 6px;
      border-radius: 10px;
      font-size: 11px;
    }

    .group-content {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    /* Update request card margin for groups */
    .request-card {
      margin-bottom: 0;
    }

    .star-btn {
      background: none;
      border: none;
      padding: 2px 4px;
      cursor: pointer;
      font-size: 14px;
      color: #666;
      transition: transform 0.2s;
    }

    .star-btn:hover {
      transform: scale(1.1);
    }

    .star-btn.starred {
      color: #f59e0b;
    }

    /* Add a subtle highlight for starred groups */
    .request-group:has(.star-btn.starred) .group-header {
      background: #fffbeb;
      border-radius: 6px;
      margin: -4px -8px;
      padding: 4px 8px;
    }

    /* GraphQL Syntax Highlighting */
    .graphql-keyword {
      color: #ff79c6; /* Pink for keywords like query, mutation */
    }

    .graphql-operation-name {
      color: #50fa7b; /* Green for operation names */
      font-weight: 500;
    }

    .graphql-field {
      color: #8be9fd; /* Cyan for field names */
    }

    .graphql-argument-name {
      color: #ffb86c; /* Orange for argument names */
    }

    .graphql-argument-value {
      color: #f1fa8c; /* Yellow for argument values */
    }

    .graphql-variable {
      color: #bd93f9; /* Purple for variables */
    }

    .graphql-directive {
      color: #ff5555; /* Red for directives */
    }

    .graphql-type {
      color: #8be9fd; /* Cyan for types */
      font-style: italic;
    }

    .graphql-brace {
      color: #f8f8f2; /* White for braces */
    }

    .graphql-comment {
      color: #6272a4; /* Blue-grey for comments */
      font-style: italic;
    }

    .graphql-enum {
      color: #bd93f9; /* Purple for enum values */
    }

    .graphql-scalar {
      color: #50fa7b; /* Green for scalar values */
    }
  </style>
</head>
<body>
  <div class="app-container">
    <header class="header">
      <div class="header-title">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">
          <!-- Dark background -->
          <rect width="200" height="200" fill="#2A2139"/>
          
          <!-- GraphQL symbol - completely flat -->
          <g transform="translate(40, 40) scale(0.8)">
            <!-- Straight connection lines -->
            <path d="
              M75 20 L125 45
              M125 45 L125 95
              M125 95 L75 120
              M75 120 L25 95
              M25 95 L25 45
              M25 45 L75 20
              
              M25 45 L125 95
              M125 45 L25 95
              M75 20 L75 120
            " stroke="white" stroke-width="4" fill="none"/>
            
            <!-- Nodes - perfectly circular -->
            <circle cx="75" cy="20" r="10" fill="white"/>
            <circle cx="125" cy="45" r="10" fill="white"/>
            <circle cx="125" cy="95" r="10" fill="white"/>
            <circle cx="75" cy="120" r="10" fill="white"/>
            <circle cx="25" cy="95" r="10" fill="white"/>
            <circle cx="25" cy="45" r="10" fill="white"/>
            
            <!-- Center node -->
            <circle cx="75" cy="70" r="12" fill="#FF69B4"/>
          </g>
          
          <!-- Magnifying glass -->
          <g transform="translate(115, 115) rotate(-20)">
            <!-- Glass -->
            <circle cx="0" cy="0" r="35" 
                    fill="none" 
                    stroke="white" 
                    stroke-width="8"/>
            
            <!-- Handle -->
            <rect x="25" y="-4" width="45" height="8" 
                  fill="white" 
                  transform="rotate(45)"
                  rx="4"/>
            
            <!-- Scanning effect -->
            <circle cx="0" cy="0" r="28" 
                    fill="none" 
                    stroke="#FF69B4" 
                    stroke-width="2"
                    stroke-dasharray="4,4"/>
            
            <!-- Reflection -->
            <path d="M-20 -15 Q-10 -25 0 -20" 
                  stroke="white" 
                  stroke-width="3" 
                  fill="none"/>
          </g>
        </svg>
        <span>GraphQL Inspector</span>
      </div>
      <div class="toolbar">
        <input type="text" class="search-box" placeholder="Search requests..." id="search-input">
        <button class="toolbar-btn" id="clear-btn" title="Clear all requests">
          <i class="mdi mdi-broom"></i>
        </button>
        <button class="toolbar-btn" id="theme-toggle" title="Toggle theme">
          <i class="mdi mdi-weather-night"></i>
        </button>
      </div>
    </header>
    <div class="split-view">
      <div class="requests-list" id="requests"></div>
      <div class="details-panel" id="details-panel">
        <div class="empty-state">
          <span style="font-size: 48px;">⚡️</span>
          <p>Select a request to view details</p>
        </div>
      </div>
    </div>
  </div>
  <script src="utils.js"></script>
  <script src="storage.js"></script>
  <script src="themes.js"></script>
  <script src="prettier.js"></script>
  <script src="panel.js"></script>
</body>
</html> 